<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ui.ChannelInfoActivity">

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <!-- Compact Channel Header -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="12dp"
            app:cardElevation="2dp"
            app:cardBackgroundColor="@android:color/white">

            <LinearLayout
                android:id="@+id/llChannelHeader"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical"
                android:background="?android:attr/selectableItemBackground"
                android:clickable="true"
                android:focusable="true">

                <!-- Profile Picture (50x50) -->
                <ImageView
                    android:id="@+id/ivChannelProfilePicture"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_marginEnd="12dp"
                    android:scaleType="centerCrop"
                    android:background="@drawable/circle_profile"
                    android:contentDescription="Channel profile picture"
                    tools:src="@drawable/ic_launcher_foreground" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <!-- Channel Title -->
                    <TextView
                        android:id="@+id/tvChannelTitle"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="@android:color/black"
                        android:maxLines="1"
                        android:ellipsize="end"
                        tools:text="Channel Name" />

                    <!-- Member Count with Icon -->
                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:gravity="center_vertical"
                        android:layout_marginTop="4dp">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="ðŸ‘¥"
                            android:textSize="12sp"
                            android:layout_marginEnd="4dp" />

                        <TextView
                            android:id="@+id/tvMemberCount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textSize="12sp"
                            android:textColor="@android:color/darker_gray"
                            tools:text="1,234 members" />

                    </LinearLayout>

                </LinearLayout>

                <!-- Real-time Status Indicator -->
                <View
                    android:id="@+id/vStatusIndicator"
                    android:layout_width="8dp"
                    android:layout_height="8dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="@android:color/holo_green_dark"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp" />

                <!-- Expand Arrow -->
                <ImageView
                    android:id="@+id/ivExpandArrow"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@drawable/ic_expand_more"
                    android:contentDescription="Show channel details" />

            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- Live Stream Status Section (Telegram Style) -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cvLiveStreamSection"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:visibility="gone"
            app:cardCornerRadius="12dp"
            app:cardElevation="2dp"
            app:cardBackgroundColor="#1E88E5">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical">

                <!-- Live Stream Icon -->
                <ImageView
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:layout_marginEnd="12dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="#FF5722"
                    android:src="@drawable/ic_videocam"
                    android:padding="8dp"
                    android:contentDescription="Live stream icon" />

                <!-- Live Stream Info -->
                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:id="@+id/tvLiveStreamTitle"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Live Stream"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="@android:color/white" />

                    <TextView
                        android:id="@+id/tvParticipantCount"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:textSize="14sp"
                        android:textColor="#E3F2FD"
                        android:layout_marginTop="2dp"
                        tools:text="1 participant" />

                </LinearLayout>

                <!-- Join Button -->
                <Button
                    android:id="@+id/btnJoinLiveStream"
                    android:layout_width="wrap_content"
                    android:layout_height="36dp"
                    android:text="Join"
                    android:textColor="@android:color/white"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:background="@drawable/bg_join_button"
                    android:paddingStart="16dp"
                    android:paddingEnd="16dp"
                    android:minWidth="0dp"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- No Live Stream Status -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cvNoLiveStreamSection"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:visibility="visible"
            app:cardCornerRadius="8dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical">

                <View
                    android:layout_width="12dp"
                    android:layout_height="12dp"
                    android:layout_marginEnd="8dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="@android:color/darker_gray" />

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="No Live Stream"
                    android:textSize="16sp"
                    android:textColor="@android:color/black" />

            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- Participants Section -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cvParticipantsSection"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            android:visibility="gone"
            app:cardCornerRadius="8dp"
            app:cardElevation="4dp"
            tools:visibility="visible">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Participants"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="@android:color/black"
                    android:layout_marginBottom="12dp" />

                <!-- Join/Leave Video Chat Button -->
                <Button
                    android:id="@+id/btnViewParticipants"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Join Video Chat"
                    android:textColor="@android:color/white"
                    android:background="@drawable/bg_button_primary"
                    android:layout_marginBottom="16dp"
                    android:padding="12dp" />

                <!-- Participant Grid Header -->
                <LinearLayout
                    android:id="@+id/llParticipantHeader"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:background="@color/header_background"
                    android:padding="8dp"
                    android:visibility="gone"
                    tools:visibility="visible">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="2"
                        android:text="Username"
                        android:textStyle="bold"
                        android:textSize="14sp"
                        android:textColor="@android:color/black" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Camera/Screen"
                        android:textStyle="bold"
                        android:textSize="12sp"
                        android:textColor="@android:color/black"
                        android:gravity="center" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Speaking"
                        android:textStyle="bold"
                        android:textSize="12sp"
                        android:textColor="@android:color/black"
                        android:gravity="center" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Muted"
                        android:textStyle="bold"
                        android:textSize="12sp"
                        android:textColor="@android:color/black"
                        android:gravity="center" />

                </LinearLayout>

                <!-- Participant Grid RecyclerView -->
                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/rvParticipants"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    tools:visibility="visible"
                    tools:itemCount="3"
                    tools:listitem="@layout/item_participant" />

            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- Loading State -->
        <ProgressBar
            android:id="@+id/pbLoading"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:visibility="gone" />

        <!-- Error Message -->
        <TextView
            android:id="@+id/tvError"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="16sp"
            android:textColor="@android:color/holo_red_dark"
            android:gravity="center"
            android:padding="16dp"
            android:visibility="gone"
            tools:text="Error loading channel information"
            tools:visibility="visible" />

    </LinearLayout>

</ScrollView>

<!-- Channel Details Modal (Slide-up from bottom) -->
<FrameLayout
    android:id="@+id/flModalOverlay"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#80000000"
    android:visibility="gone"
    android:clickable="true"
    android:focusable="true">

    <androidx.cardview.widget.CardView
        android:id="@+id/cvChannelModal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_margin="0dp"
        app:cardCornerRadius="20dp"
        app:cardElevation="8dp"
        app:cardBackgroundColor="@android:color/white">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- Modal Handle -->
            <View
                android:layout_width="40dp"
                android:layout_height="4dp"
                android:layout_gravity="center_horizontal"
                android:background="@drawable/modal_handle"
                android:layout_marginBottom="20dp" />

            <!-- Large Profile Picture -->
            <ImageView
                android:id="@+id/ivModalProfilePicture"
                android:layout_width="80dp"
                android:layout_height="80dp"
                android:layout_gravity="center_horizontal"
                android:scaleType="centerCrop"
                android:background="@drawable/circle_profile"
                android:layout_marginBottom="16dp"
                android:contentDescription="Channel profile picture"
                tools:src="@drawable/ic_launcher_foreground" />

            <!-- Channel Name -->
            <TextView
                android:id="@+id/tvModalChannelTitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="20sp"
                android:textStyle="bold"
                android:textColor="@android:color/black"
                android:gravity="center"
                android:layout_marginBottom="8dp"
                tools:text="Channel Name" />

            <!-- Channel Handle -->
            <TextView
                android:id="@+id/tvModalChannelHandle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="14sp"
                android:textColor="@android:color/darker_gray"
                android:gravity="center"
                android:layout_marginBottom="16dp"
                tools:text="@channelhandle" />

            <!-- Stats Row -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center"
                android:layout_marginBottom="20dp">

                <!-- Member Count -->
                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:gravity="center"
                    android:layout_marginEnd="32dp">

                    <TextView
                        android:id="@+id/tvModalMemberCount"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textSize="18sp"
                        android:textStyle="bold"
                        android:textColor="@android:color/black"
                        tools:text="1,234" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Members"
                        android:textSize="12sp"
                        android:textColor="@android:color/darker_gray" />

                </LinearLayout>

                <!-- Online Count (if available) -->
                <LinearLayout
                    android:id="@+id/llOnlineCount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:gravity="center"
                    android:visibility="gone">

                    <TextView
                        android:id="@+id/tvModalOnlineCount"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textSize="18sp"
                        android:textStyle="bold"
                        android:textColor="@android:color/holo_green_dark"
                        tools:text="56" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Online"
                        android:textSize="12sp"
                        android:textColor="@android:color/darker_gray" />

                </LinearLayout>

            </LinearLayout>

            <!-- Channel Bio/Description -->
            <TextView
                android:id="@+id/tvModalChannelDescription"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="14sp"
                android:textColor="@android:color/black"
                android:lineSpacingMultiplier="1.3"
                android:layout_marginBottom="20dp"
                android:gravity="center"
                tools:text="This is the channel description that provides more details about what this channel is about and what kind of content users can expect." />

            <!-- Action Buttons -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center">

                <!-- Close Button -->
                <Button
                    android:id="@+id/btnCloseModal"
                    android:layout_width="0dp"
                    android:layout_height="48dp"
                    android:layout_weight="1"
                    android:text="Close"
                    android:textColor="@android:color/darker_gray"
                    android:background="@drawable/bg_button_secondary"
                    android:layout_marginEnd="8dp" />

                <!-- Refresh Button -->
                <Button
                    android:id="@+id/btnModalRefresh"
                    android:layout_width="0dp"
                    android:layout_height="48dp"
                    android:layout_weight="1"
                    android:text="Refresh"
                    android:textColor="@android:color/white"
                    android:background="@drawable/bg_button_primary"
                    android:layout_marginStart="8dp" />

            </LinearLayout>

        </LinearLayout>

    </androidx.cardview.widget.CardView>

</FrameLayout>

</FrameLayout>